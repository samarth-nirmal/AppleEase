
<br>
<h3 style="text-align: center;">Generate a Coverletter</h3>
<p style="text-align: center; font-weight: 300;">Here you can generate personalized cover letters for your fetched jobs — <br>complete with all required filters and one-click apply options.</p>
<div class="cover-letter-wrapper">
  <form [formGroup]="coverLetterForm" (ngSubmit)="onSubmit()" class="form-card">

    <!-- Company Name -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Company Name (optional)</mat-label>
      <input matInput formControlName="companyName" placeholder="e.g., Google" />
    </mat-form-field>

    <!-- Job Title -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Job Title (optional)</mat-label>
      <input matInput formControlName="jobTitle" placeholder="e.g., Frontend Developer" />
    </mat-form-field>

    <!-- Job Description -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Job Description *</mat-label>
      <textarea
        matInput
        formControlName="jobDescription"
        placeholder="Paste the job description here..."
        rows="6"
        required
        minlength="50"
      ></textarea>
      <mat-error *ngIf="coverLetterForm.get('jobDescription')?.hasError('minlength')">
        Job description must be at least 100 characters long.
      </mat-error>
    </mat-form-field>

    <!-- Submit -->
<div class="button-container button-container-centered">
  <div class="rainbow-button-wrapper">
    <button
      mat-flat-button
      type="submit"
      color="Secondary"
      [disabled]="coverLetterForm.invalid"
    >
      ✨ Generate
    </button>
  </div>
</div>

<br>
    <!-- Progress -->
    <mat-progress-bar mode="indeterminate" *ngIf="isSubmitted"></mat-progress-bar>
  </form>

  <!-- Output Box -->
  <mat-card class="output-card" *ngIf="submittedText">
    <div class="output-header">
      <span class="output-title">Generated Cover Letter</span>
      <div class="output-icons">
        <mat-icon
          (click)="copyText()"
          matRipple
          matTooltip="Copy to clipboard"
          matTooltipPosition="above"
          >content_copy</mat-icon>
        <mat-icon
          (click)="onSubmit()"
          matRipple
          matTooltip="Regenerate"
          matTooltipPosition="above"
          >autorenew</mat-icon>
      </div>
    </div>
    <pre class="output-text">{{ submittedText }}</pre>
  </mat-card>
</div>
