<div *ngIf="!jobApplyProgress">
  <div class="table-container">
    <h3 style="text-align: center;">Fetched Jobs</h3>
    <p style="text-align: center; font-weight: 300;">you'll find all your fetched jobs over here with all the required filters and <br>applying to the job buttons</p>
    <br><br>
    <div class="upperTable">
      <div class="filterButtons">
        <mat-chip-listbox aria-label="Job Relevance Filter" [(ngModel)]="selectedFilter" (ngModelChange)="filterJobs()" class="align-left">
          <mat-chip-option [value]="'mostRelevant'">
            Most Relevant Jobs
          </mat-chip-option>
        </mat-chip-listbox>
        &nbsp;&nbsp;
        <mat-chip-listbox aria-label="Successfully Applied Filter" [(ngModel)]="selectedFilter" (ngModelChange)="successfullyAppliedFilter()" class="align-left">
          <mat-chip-option [value]="'successApply'">
            Successfully Applied
          </mat-chip-option>
        </mat-chip-listbox>
        &nbsp;&nbsp;
        <mat-chip-listbox aria-label="Not Applied Filter" [(ngModel)]="selectedFilter" (ngModelChange)="NotAppliedFilter()" class="align-left">
          <mat-chip-option [value]="'NotApply'">
            Not Applied
          </mat-chip-option>
        </mat-chip-listbox>
      </div>
      

      <div *ngIf="errorMessage" class="error-message">
        <mat-error>{{ errorMessage }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</mat-error>
      </div>
      <div *ngIf="successMessage" class="success-message">
        <mat-icon color="primary">check_circle</mat-icon>
        <span>{{ successMessage }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      </div>
      <div class="align-right">
        <button mat-fab extended (click)="applyRelavent()">
          <mat-icon>hotel</mat-icon>
          Lazy Apply - Most relevant Jobs
        </button>

        <button mat-fab extended (click)="applyAll()">
          <mat-icon>
            done_outline
          </mat-icon>
          Lazy Apply all
        </button>
      </div>
    </div>

    <br>
    <table mat-table class="mat-elevation-z2">
      <!-- Table Header -->
      <tr>
        <th mat-header-cell> Job Title </th>
        <th mat-header-cell> Company </th>
        <th mat-header-cell> Location </th>
        <th mat-header-cell> Required Experience </th>
        <th mat-header-cell> Match Score </th>
        <th mat-header-cell> Apply Status </th>
        <th mat-header-cell> View Job </th>
      </tr>

      <!-- Table Rows -->
      <tr *ngFor="let job of jobList">
        <td mat-cell> {{ job.jobTitle }} </td>
        <td mat-cell> {{ job.companyName }} </td>
        <td mat-cell> {{ job.location }} </td>
        <td mat-cell> {{ job.experienceRequired }} </td>
        <td mat-cell [ngStyle]="{'color': job.matchScore > 80 ? 'green' : (job.matchScore >= 50 ? 'orange' : 'red')}">
          {{ job.matchScore }} %
        </td>
        <td mat-cell> {{ job.isApplied || 'No' }} </td>
        <td mat-cell>
          <a [href]="job.link" target="_blank">
            <button mat-fab extended>
              <mat-icon>open_in_new</mat-icon>
              View
            </button>
          </a>
        </td>
      </tr>

      <!-- Empty Table Message -->
      <tr *ngIf="jobList.length === 0">
        <td mat-cell colspan="7" style="text-align: center;">
          Nothing to show here
        </td>
      </tr>
    </table>
  </div>
</div>

<div *ngIf="jobApplyProgress" class="progress-card-container">
  <div class="loader-wrapper">
    <span class="loader"></span>
  </div>
  <br><br>
  <p class="job-fact">ðŸ’¡ {{ currentFact }}</p>
</div>
